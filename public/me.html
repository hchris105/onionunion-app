<!doctype html><meta charset="utf-8">
<title>我的帳號 - OnionUnion</title><meta name="viewport" content="width=device-width,initial-scale=1">
<style>body{font:16px/1.5 system-ui;margin:40px auto;max-width:720px}code{background:#f6f8fa;padding:2px 6px;border-radius:6px}</style>
<h2>我的帳號</h2>
<pre id="out">讀取中...</pre>
<p><button id="logout">登出</button></p>
<script>
async function main(){
  const t=localStorage.getItem("JWT");
  if(!t){ location.href="/login.html"; return; }
  // 如果你有 /auth/me 就打它；否則這裡示範打一個需要會員權限的 /ask
  const r=await fetch("/auth/me",{headers:{Authorization:"Bearer "+t}}).catch(()=>null);
  if(!r||!r.ok){document.querySelector("#out").textContent="無法讀取，請重新登入。";return}
  const j=await r.json().catch(()=>({}));
  document.querySelector("#out").textContent=JSON.stringify(j,null,2);
}
main();
document.querySelector("#logout").onclick=()=>{ localStorage.removeItem("JWT"); location.href="/login.html"; };
</script>
